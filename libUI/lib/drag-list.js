(function(t,a){"object"===typeof exports&&"object"===typeof module?module.exports=a():"function"===typeof define&&define.amd?define([],a):"object"===typeof exports?exports["cqc"]=a():(t["cqc"]=t["cqc"]||{},t["cqc"]["drag-list"]=a())})(self,(function(){return function(){"use strict";var t={};!function(){t.d=function(a,o){for(var r in o)t.o(o,r)&&!t.o(a,r)&&Object.defineProperty(a,r,{enumerable:!0,get:o[r]})}}(),function(){t.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}();var a={};t.d(a,{default:function(){return e}});var o={name:"CqcDragListItem",inject:["dragList"],props:{data:{type:Object},index:{type:Number,default:0}},render(){const t=arguments[0],a=this.data,{dragStart:o,dragEnd:r,dragOver:e,drop:i}=this.dragList,n={onDragstart(t){t.stopPropagation(),o(t,a)},onDragover(t){t.preventDefault(),t.stopPropagation(),e(t,a)},onDragend(t){t.stopPropagation(),r(t,a)},onDrop(t){i(t,a)}};return t("div",{class:"cqc-drag-list-item",attrs:{draggable:"true"},on:{dragstart:n.onDragstart,dragover:n.onDragover,dragend:n.onDragend,drop:n.onDrop}},[this.$slots.default])}},r={name:"CqcDragList",components:{Item:o},provide(){return{dragList:this}},props:{data:{type:Array,default:()=>[]}},data(){return{cloneData:[],dropPosition:"",dragNode:null,dragData:null,dropData:null,showInditcator:{display:"none",top:"9999px",left:0}}},watch:{data:{immediate:!0,handler(t){t&&(this.cloneData=this.makeKey(t))}}},methods:{makeKey(t){return t._dargKey=0,t.forEach(((t,a)=>t._dargKey=a+1)),JSON.parse(JSON.stringify(t))},dragStart(t,a){this.dragNode=t.target,this.dragData=a},dragOver(t,a){if(this.dragData._dargKey===a._dargKey)return!1;const{top:o,bottom:r,height:e}=t.target.getBoundingClientRect(),i=this.$refs.instanceNode.getBoundingClientRect().top,n=t.clientY;n-o>e/2&&n-o<e?(this.dropPosition=2,this.showInditcator.top=r-i+"px",this.showInditcator.display="block"):n-o>0&&n-o<e/2?(this.dropPosition=1,this.showInditcator.top=o-i+"px",this.showInditcator.display="block"):(this.dropPosition="",this.showInditcator.display="none")},drop(t,a){this.dropData=a},clearData(){this.dropPosition="",this.dragNode=null,this.dragData=null,this.dropData=null,this.showInditcator={display:"none",top:"9999px",left:0}},dragEnd(){if(this.dropPosition&&this.dropData){this.cloneData=JSON.parse(JSON.stringify(this.cloneData.filter((t=>t._dargKey!==this.dragData._dargKey))));const t=this.cloneData.findIndex((t=>t._dargKey===this.dropData._dargKey));1===this.dropPosition?this.cloneData.splice(t,0,this.dragData):2===this.dropPosition&&this.cloneData.splice(t+1,0,this.dragData)}this.clearData(),this.$emit("change",this.cloneData)}},render(){const t=arguments[0],a=a=>a&&0!==a.length?a.map(((a,r)=>t(o,{attrs:{index:r,data:a},key:a._dargKey},[this.$scopedSlots.default({row:a})]))):t("div",["暂无数据"]);return t("div",{class:"cqc-drag-list",ref:"instanceNode"},[a(this.cloneData),t("div",{class:"cqc-drap-inditcator",style:this.showInditcator})])},install:t=>t.component(r.name,r)},e=r;return a=a["default"],a}()}));